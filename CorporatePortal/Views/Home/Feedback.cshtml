@model CorporatePortal.Models.User

@{
    ViewBag.Title = "Обратная связь";
    ViewBag.HeaderTitle = "Обратная связь";
    Layout = "_Layout";
}

<div class="feedback-page-container">
    <div class="page-header-with-button">
        <h2 class="page-title">Обратная связь</h2>
        <button onclick="goBack()" class="btn btn-secondary back-button">Назад</button>
    </div>

    <div class="feedback-content-card">
        <p class="feedback-description">Вы можете оставить предложение, жалобу или обращение в свободной форме. Если вы не укажете своё имя, сообщение будет анонимным.</p>

        <form method="post" asp-controller="Feedback" asp-action="Submit" class="feedback-form">
            <div class="form-group">
                <label for="name">Ваше имя:</label>
                <input type="text" id="name" name="name" class="form-control" value="@(Model?.FullName ?? "Неизвестный пользователь")" readonly />
            </div>
            <div class="form-group">
                <div class="form-check">
                    <input type="checkbox" id="anonymous" name="anonymous" class="form-check-input" onchange="toggleNameField()" />
                    <label for="anonymous" class="form-check-label">Отправить анонимно</label>
                </div>
            </div>
            <div class="form-group">
                <label for="message">Ваше сообщение:</label>
                <textarea id="message" name="message" class="form-control" rows="5" placeholder="Введите ваше сообщение" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Отправить</button>
        </form>
    </div>
</div>

<script>
    function toggleNameField() {
        var nameField = document.getElementById('name');
        var anonymousCheckbox = document.getElementById('anonymous');

        if (anonymousCheckbox.checked) {
            nameField.value = "Анонимный пользователь";
            nameField.readOnly = true;
        } else {
            nameField.value = "@Html.Raw(Model?.FullName ?? "Неизвестный пользователь")";
            nameField.readOnly = true;
        }
    }
</script>